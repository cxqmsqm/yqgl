(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d980550a"],{"1b62":function(e,t,i){"use strict";t["a"]={data:function(){return{pageNo:1,pageSize:10,layout:"total, sizes, prev, pager, next, jumper",pageSizes:[10,20,30,40],total:0,keyword:"",tableData:[],currentItem:{},showDialog:!1}},methods:{currentChange:function(e){this.pageNo=e,this.load()},sizeChange:function(e){this.pageSize=e,this.load()},handleSearch:function(){this.pageNo=1,this.load()}}}},"20c0":function(e,t,i){"use strict";i.d(t,"e",(function(){return n})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return c})),i.d(t,"d",(function(){return o}));i("ba67");var a=i("b775"),n=function(e,t,i,n){var r={pageNo:e,pageSize:t,keyword:i,adminId:n};return Object(a["a"])({url:"/feed/selectFeedList",method:"POST",data:r})},r=function(e){return Object(a["a"])({url:"/feed/addFeed",method:"POST",data:e})},s=function(e){return Object(a["a"])({url:"/feed/editFeed",method:"POST",data:e})},c=function(e){return Object(a["a"])({url:"/feed/deleteFeed/".concat(e),method:"POST"})},o=function(e,t){return Object(a["a"])({url:"/feed/getAnimalTotal/".concat(e,"/").concat(t),method:"POST"})}},"35cb":function(e,t,i){},"8b9d":function(e,t,i){"use strict";i("35cb")},"905c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"epidemic_class"},[i("div",{staticClass:"tool_class"},[i("el-input",{staticStyle:{width:"250px","margin-right":"20px"},attrs:{placeholder:"请输入关键字",border:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("疫情上报")])],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{prop:"farmName",label:"养殖场名称"}}),i("el-table-column",{attrs:{prop:"animalName",label:"动物名称"}}),i("el-table-column",{attrs:{prop:"sicknessNum",label:"发病数量"}}),i("el-table-column",{attrs:{prop:"dieNum",label:"感染死亡数量"}}),i("el-table-column",{attrs:{prop:"total",label:"种群总数"}}),i("el-table-column",{attrs:{prop:"createDate",label:"录入时间"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" "+e._s(e._f("time")(i.createDate))+" ")]}}])}),i("el-table-column",{attrs:{label:"发病时间"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" "+e._s(e._f("time")(i.sicknessDate))+" ")]}}])}),i("el-table-column",{attrs:{prop:"sicknessSymptom",label:"发病症状"}}),i("el-table-column",{attrs:{prop:"isVero",label:"是否接种疫苗"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" "+e._s(1===i.isVero?"是":"否")+" ")]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.edit(a)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])]}}])})],1),i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{layout:e.layout,"current-page":e.pageNo,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}),i("add-edit-epidemic",{attrs:{epidemic:e.currentItem},on:{complete:e.handleComplete},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)},n=[],r=i("60b5"),s=(i("6a61"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{title:e.title,"custom-class":"drawer_class",visible:e.value,size:"30%"},on:{open:e.open,close:e.close}},[i("el-form",{ref:"form",attrs:{model:e.epidemic,"label-position":"left","label-width":"110px",rules:e.rules}},[i("el-form-item",{attrs:{label:"养殖场名称",prop:"farmId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",placeholder:"请选择养殖场","remote-method":e.selectkeyword,loading:e.loading,"automatic-dropdown":""},on:{change:e.farmChange},model:{value:e.epidemic.farmId,callback:function(t){e.$set(e.epidemic,"farmId",t)},expression:"epidemic.farmId"}},e._l(e.farms,(function(e){return i("el-option",{key:e.id,attrs:{label:e.farmName,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"动物名称",prop:"animalId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择饲养动物"},on:{change:e.animalChange},model:{value:e.epidemic.animalId,callback:function(t){e.$set(e.epidemic,"animalId",t)},expression:"epidemic.animalId"}},e._l(e.animals,(function(e){return i("el-option",{key:e.id,attrs:{label:e.animalName,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"发病数量",prop:"sicknessNum"}},[i("el-input-number",{attrs:{disabled:e.isDisable,max:e.epidemic.total-e.dieNum,min:0},model:{value:e.epidemic.sicknessNum,callback:function(t){e.$set(e.epidemic,"sicknessNum",t)},expression:"epidemic.sicknessNum"}})],1),i("el-form-item",{attrs:{label:"感染死亡数量",prop:"dieNum"}},[i("el-input-number",{attrs:{disabled:e.isDisable,max:e.epidemic.sicknessNum,min:0},model:{value:e.epidemic.dieNum,callback:function(t){e.$set(e.epidemic,"dieNum",t)},expression:"epidemic.dieNum"}})],1),i("el-form-item",{attrs:{label:"已死亡数量"}},[i("el-input-number",{attrs:{min:0,disabled:!0},model:{value:e.dieNum,callback:function(t){e.dieNum=t},expression:"dieNum"}})],1),i("el-form-item",{attrs:{label:"种群总数",prop:"total"}},[i("el-input-number",{attrs:{min:0,disabled:!0},model:{value:e.epidemic.total,callback:function(t){e.$set(e.epidemic,"total",t)},expression:"epidemic.total"}})],1),i("el-form-item",{attrs:{label:"是否接种疫苗",prop:"isVero"}},[i("el-radio",{attrs:{label:0,disabled:e.isDisable},model:{value:e.epidemic.isVero,callback:function(t){e.$set(e.epidemic,"isVero",t)},expression:"epidemic.isVero"}},[e._v("否 ")]),i("el-radio",{attrs:{label:1,disabled:e.isDisable},model:{value:e.epidemic.isVero,callback:function(t){e.$set(e.epidemic,"isVero",t)},expression:"epidemic.isVero"}},[e._v("是 ")])],1),i("el-form-item",{attrs:{label:"发病时间",prop:"sicknessDate"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisable,type:"datetime",placeholder:"请选择发病时间","default-time":"12:00:00"},model:{value:e.epidemic.sicknessDate,callback:function(t){e.$set(e.epidemic,"sicknessDate",t)},expression:"epidemic.sicknessDate"}})],1),i("el-form-item",{attrs:{label:"发病症状",prop:"sicknessSymptom"}},[i("el-input",{attrs:{disabled:e.isDisable,type:"textarea",rows:3},model:{value:e.epidemic.sicknessSymptom,callback:function(t){e.$set(e.epidemic,"sicknessSymptom",t)},expression:"epidemic.sicknessSymptom"}})],1)],1),i("span",[i("el-button",{on:{click:e.close}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确 定")])],1)],1)}),c=[],o=(i("b911"),i("16cc"),i("dc28"),i("f073"),i("d415")),l=i("cb93"),d=i("20c0"),m={name:"AddEditEpidemic",props:{value:{type:Boolean,default:!1},epidemic:{type:Object,default:function(){}}},watch:{"epidemic.farmId":function(){var e=this;this.epidemic.farmId&&this.epidemic.animalId&&Object(d["d"])(this.epidemic.farmId,this.epidemic.animalId).then((function(t){e.epidemic.total=t.data,e.dieNum=t.count,0===e.epidemic.total&&e.$message.error("该养殖场未饲养该种动物！！！")}))},"epidemic.animalId":function(){var e=this;this.epidemic.farmId&&this.epidemic.animalId&&Object(d["d"])(this.epidemic.farmId,this.epidemic.animalId).then((function(t){e.epidemic.total=t.data,e.dieNum=t.count,0===e.epidemic.total&&e.$message.error("该养殖场未饲养该种动物！！！")}))}},computed:{isDisable:function(){return!this.epidemic.farmId||(!this.epidemic.animalId||0===this.epidemic.total)},title:function(){return this.epidemic.id?"编辑疫情信息":"添加疫情信息"}},data:function(){return{dieNum:0,rules:{farmId:[{required:!0,message:"请选择养殖场",trigger:"change"}],animalId:[{required:!0,message:"请选择申报动物",trigger:"change"}],sicknessNum:[{required:!0,message:"请输入发病数量",trigger:"blur"}],sicknessDate:[{required:!0,message:"请选择发病时间",trigger:"blur"}],sicknessSymptom:[{required:!0,message:"请输入发病症状",trigger:"blur"}],dieNum:[{required:!0,message:"请输入感染死亡数量",trigger:"blur"}],total:[{required:!0,message:"请输入种群数量",trigger:"change"}],isVero:[{required:!0,message:"请选择是否接种疫苗",trigger:"change"}]},animals:[],farms:[],loading:!1}},methods:{animalChange:function(e){this.epidemic.animalId=e,this.epidemic.animalName=this.animals.find((function(t){return t.id===e})).animalName},farmChange:function(e){this.epidemic.farmId=e,this.epidemic.farmName=this.farms.find((function(t){return t.id===e})).farmName},selectkeyword:function(e){this.farmName=e,this.open()},open:function(){var e=this;this.$nextTick((function(){e.$refs.form.clearValidate()}));var t=1!=this.$store.state.user.userObject.isAdmin?this.$store.state.user.userObject.id:"";this.loading=!0,this.epidemic.id&&Object(d["d"])(this.epidemic.farmId,this.epidemic.animalId).then((function(t){e.epidemic.total=t.data,e.dieNum=t.count,0===e.epidemic.total&&e.$message.error("该养殖场未饲养该种动物！！！")})),Promise.all([Object(l["c"])(),Object(o["d"])(1,0,this.farmName,t)]).then((function(t){e.loading=!1,e.animals=t[0].data,e.farms=t[1].data}))},ok:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.isDisable?e.$message.error("该养殖场未饲养该种动物！！！"):e.$emit("complete",e.epidemic))}))},close:function(){this.$emit("input",!1)}}},u=m,p=(i("cb55"),i("5d22")),f=Object(p["a"])(u,s,c,!1,null,null,null),b=f.exports,h=i("1b62"),g=i("b775"),k=function(e,t,i,a){var n={pageNo:e,pageSize:t,keyword:i,adminId:a};return Object(g["a"])({url:"/epidemic/selectEpidemicList",method:"POST",data:n})},v=function(e){return Object(g["a"])({url:"/epidemic/addEpidemic",method:"POST",data:e})},w=function(e){return Object(g["a"])({url:"/epidemic/editEpidemic",method:"POST",data:e})},O=function(e){return Object(g["a"])({url:"/epidemic/deleteEpidemic/".concat(e),method:"POST"})},y={name:"Epidemic",props:{},computed:{},components:{AddEditEpidemic:b},mixins:[h["a"]],watch:{},data:function(){return{}},methods:{handleDelete:function(e){var t=this;this.$confirm("确认删除疫情记录？","提示",{type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function i(){var a,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,O(e.id);case 2:a=i.sent,n=a.code,r=a.msg,0===n?(t.$message.success("删除成功"),t.load()):t.$message.error(r);case 6:case"end":return i.stop()}}),i)}))))},edit:function(e){this.currentItem=JSON.parse(JSON.stringify(e)),this.showDialog=!0},handleComplete:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var a,n,r,s,c,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e.id){i.next=9;break}return i.next=3,w(e);case 3:a=i.sent,n=a.code,r=a.msg,0===n?(t.$message.success("编辑成功"),t.load()):t.$message.error(r),i.next=15;break;case 9:return i.next=11,v(e);case 11:s=i.sent,c=s.code,o=s.msg,0===c?(t.$message.success("添加成功"),t.load()):t.$message.error(o);case 15:t.showDialog=!1;case 16:case"end":return i.stop()}}),i)})))()},handleAdd:function(){this.currentItem={farmName:"",farmId:"",animalName:"",animalId:"",sicknessNum:"",sicknessDate:"",sicknessSymptom:"",dieNum:"",total:0,isVero:0},this.showDialog=!0},load:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i,a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=1!=e.$store.state.user.userObject.isAdmin?e.$store.state.user.userObject.id:"",t.next=3,k(e.pageNo,e.pageSize,e.keyword,i);case 3:a=t.sent,n=a.data,r=a.count,e.tableData=n,e.total=r;case 8:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.load()}},N=y,S=(i("8b9d"),Object(p["a"])(N,a,n,!1,null,"ca682484",null));t["default"]=S.exports},"9a3e":function(e,t,i){},b911:function(e,t,i){"use strict";var a=i("bde0"),n=i("9670").find,r=i("6859"),s="find",c=!0;s in[]&&Array(1)[s]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},cb55:function(e,t,i){"use strict";i("9a3e")},cb93:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return s}));var a=i("b775"),n=function(){return Object(a["a"])({url:"/animal/selectAnimalList",method:"POST"})},r=function(e){return Object(a["a"])({url:"/animal/addAnimal?animalName=".concat(e),method:"POST"})},s=function(e){return Object(a["a"])({url:"/animal/deleteAnimal/".concat(e),method:"POST"})}},d415:function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return c}));var a=i("b775"),n=function(e,t,i,n){var r={pageNo:e,pageSize:t,keyword:i,adminId:n};return Object(a["a"])({url:"/farm/selectFarmList",method:"POST",data:r})},r=function(e){return Object(a["a"])({url:"/farm/editFarm",method:"POST",data:e})},s=function(e){return Object(a["a"])({url:"/farm/addFarm",method:"POST",data:e})},c=function(e){return Object(a["a"])({url:"/farm/deleteFarm/".concat(e),method:"POST"})}}}]);